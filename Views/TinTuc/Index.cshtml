@model IEnumerable<WEB_CV.Models.BaiViet>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Tin tức & Sự kiện";
    var placeholder = Url.Content("~/media/news-placeholder.jpg");
}

<div class="container py-4">
  <div class="d-flex align-items-end justify-content-between mb-3">
    <div>
      <span class="eyebrow mb-2">Tin tức</span>
      <h1 class="h3 mb-0">Tin tức &amp; Sự kiện</h1>
    </div>
    <a class="btn btn-outline-secondary" asp-controller="Home" asp-action="Index">Trang chủ</a>
  </div>

  <div class="row g-3">
    @if (!(Model?.Any() ?? false))
    {
      <div class="col-12">
        <div class="alert alert-info">Chưa có bài viết.</div>
      </div>
    }
    else
    {
      @foreach (var p in Model)
      {
        var cover = string.IsNullOrWhiteSpace(p.AnhTieuDe) ? placeholder : Url.Content(p.AnhTieuDe);
        var alt   = string.IsNullOrWhiteSpace(p.AnhTieuDeAlt) ? p.TieuDe : p.AnhTieuDeAlt;
        <div class="col-12 col-md-6 col-lg-4">
          <article class="card h-100 border-0 shadow-sm">
            <a asp-controller="Home" asp-action="ChiTietBaiViet" asp-route-id="@p.Id" class="ratio ratio-16x9 d-block">
              <img src="@cover" alt="@alt" class="w-100 h-100 object-fit-cover" loading="lazy" />
            </a>
            <div class="card-body d-flex flex-column">
              <h5 class="clamp-2 mb-2">
                <a class="stretched-link text-decoration-none"
                   asp-controller="Home" asp-action="ChiTietBaiViet" asp-route-id="@p.Id">
                  @p.TieuDe
                </a>
              </h5>
              @if (!string.IsNullOrWhiteSpace(p.TomTat))
              { <p class="text-muted clamp-3 mb-3">@p.TomTat</p> }
              <div class="small text-muted mt-auto">
                <span class="chip">@p.NgayDang.ToString("dd/MM/yyyy")</span>
                @if (!string.IsNullOrEmpty(p.ChuyenMuc?.Ten)) { <span class="chip">@p.ChuyenMuc.Ten</span> }
              </div>
            </div>
          </article>
        </div>
      }
    }
  </div>
</div>
