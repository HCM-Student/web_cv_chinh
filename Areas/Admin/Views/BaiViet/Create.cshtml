@model WEB_CV.Models.BaiViet
@{
    ViewData["Title"] = "Thêm bài viết";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<form asp-area="Admin"
      asp-controller="BaiViet"
      asp-action="Create"
      method="post"
      enctype="multipart/form-data">
  @Html.AntiForgeryToken()

  <partial name="_Form" model="Model" />

  <div class="toolbar-sticky">
    <div class="container-fluid d-flex justify-content-end gap-2">
      <a asp-area="Admin" asp-controller="BaiViet" asp-action="Index" class="btn btn-light">Hủy</a>
      <button type="submit" class="btn btn-primary btn-save">
        <i class="fas fa-save me-2"></i> Lưu
      </button>
    </div>
  </div>
</form>

@section Scripts{
  <partial name="_ValidationScriptsPartial" />
  <script>
    // autosize cho các textarea gắn class "autosize" (vd: TomTat)
    document.querySelectorAll('textarea.autosize').forEach(t=>{
      const resize=()=>{ t.style.height='auto'; t.style.height=t.scrollHeight+'px'; };
      t.addEventListener('input', resize); resize();
    });

    // trạng thái loading khi ấn Lưu
    document.querySelector('.btn-save')?.addEventListener('click', function(){
      this.classList.add('disabled');
      this.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Đang lưu...';
    });
  </script>
}
